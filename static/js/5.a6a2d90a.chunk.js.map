{"version":3,"sources":["hooks/useMyToast.js","assets/style/style.js","assets/images/default.svg","assets/images/flag.svg","assets/images/crosshair.svg","Components/Map/Map.js","util/pathFilter.js","api/transport.js","hooks/useSpots.js","hooks/useAvailability.js","hooks/usePosition.js","hooks/useShape.js","Components/Navbar/Navbar.js","util/combineData.js","Components/SpecialBottons/MapModeButton.js","Pages/BikePage.js"],"names":["useMyToast","id","toast","useToast","successToast","successText","isActive","title","position","status","duration","isClosable","warningToast","warningText","infoToast","infoText","errorToast","errorText","textOverflow","whiteSpace","overflow","maxW","containerStyle","width","height","MyMap","lat","lng","nearbySpots","routePath","mode","useState","currentMap","setCurrentMap","isLoaded","useJsApiLoader","googleMapsApiKey","process","currentPath","setCurrentPath","useEffect","Geometry","replace","trim","split","reduce","acc","cur","curArr","panTo","spots","flex","w","mapContainerStyle","zoom","onLoad","e","console","log","setCenter","options","gestureHandling","zoomControl","scaleControl","fullscreenControl","mapTypeControl","map","spot","StationPosition","PositionLat","PositionLon","icon","url","markerIcon","StationID","closeBoxURL","alignBottom","pixelOffset","window","google","maps","Size","transition","bg","color","justifyContent","alignItems","borderRadius","h","fontWeight","AvailableRentBikes","AvailableReturnBikes","renderBox","polyline","path","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","clickable","draggable","editable","visible","radius","zIndex","corsshairIcon","length","flagIcon","memo","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","Authorization","getHMAC","bike","axios","create","headers","baseURL","cyclingRoute","useStation","setSpots","search","a","option","city","finalUrl","get","data","useAvailability","usePosition","setLat","setLng","error","setError","onChange","coords","latitude","longitude","onError","message","geo","navigator","geolocation","watcher","watchPosition","clearWatch","useShape","skip","skipString","Navbar","onHamburgerClick","children","routeName","navigate","useNavigate","pathname","useLocation","top","boxShadow","py","px","minH","display","base","md","left","onClick","alignSelf","cursor","size","m","variant","marginLeft","as","FaRoute","combineData","arr1","arr2","target","combine","concat","x","Object","assign","keys","k","MapModeButton","mapMode","rwdStyle","letterSpacing","gridGap","MdDirectionsBike","verticalAlign","padding","transform","FaParking","BikePage","inputRef","useRef","useSpots","nearbyStations","searchNearbyStations","stationDetail","searchStationDetail","searchTerm","setSearchTerm","setMapMode","switchMode","flexDirection","onSubmit","preventDefault","current","value","ref","placeholder","type","background","onFocus","document","activeElement","blur"],"mappings":"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","file":"static/js/5.a6a2d90a.chunk.js","sourcesContent":["import { useToast } from '@chakra-ui/toast'\n\nconst useMyToast = (id) => {\n  const toast = useToast()\n  const warningToast = (warningText) => {\n    if (!toast.isActive(id)) {\n      return toast({\n        id,\n        title: warningText,\n        position: 'bottom',\n        status: 'warning',\n        duration: 3000,\n        isClosable: true\n      })\n    }\n  }\n  const errorToast = (errorText) => {\n    if (!toast.isActive(id)) {\n      return toast({\n        id,\n        title: errorText,\n        position: 'bottom',\n        status: 'error',\n        duration: 3000,\n        isClosable: true\n      })\n    }\n  }\n  const successToast = (successText) => {\n    if (!toast.isActive(id)) {\n      return toast({\n        id,\n        title: successText,\n        position: 'bottom',\n        status: 'success',\n        duration: 3000,\n        isClosable: true\n      })\n    }\n  }\n  const infoToast = (infoText) => {\n    if (!toast.isActive(id)) {\n      return toast({\n        id,\n        title: infoText,\n        position: 'bottom',\n        status: 'error',\n        duration: 3000,\n        isClosable: true\n      })\n    }\n  }\n  return { successToast, warningToast, infoToast, errorToast }\n}\n\nexport default useMyToast\n","export const textOverflow = {\n  whiteSpace: 'nowrap',\n  textOverflow: 'ellipsis',\n  overflow: 'hidden',\n  maxW: '100px'\n}\n","export default __webpack_public_path__ + \"static/media/default.ca1990dc.svg\";","export default __webpack_public_path__ + \"static/media/flag.a2df00b5.svg\";","export default __webpack_public_path__ + \"static/media/crosshair.a8fe395c.svg\";","import { Flex, Text } from '@chakra-ui/react'\nimport { memo, useState, useEffect } from 'react'\nimport markerIcon from 'assets/images/default.svg'\nimport flagIcon from 'assets/images/flag.svg'\nimport corsshairIcon from 'assets/images/crosshair.svg'\n// import { Loader } from '@googlemaps/js-api-loader'\nimport {\n  GoogleMap,\n  useJsApiLoader,\n  Marker,\n  InfoBox,\n  Polyline\n} from '@react-google-maps/api'\nimport PropTypes from 'prop-types'\nimport { pathFilter } from 'util/pathFilter'\n\n// const loader = new Loader({\n//   apiKey: process.env.REACT_APP_GOOGLE_KEY,\n//   version: 'weekly'\n// })\n\nconst containerStyle = {\n  width: '100%',\n  height: '100%'\n}\n\nconst MyMap = ({ lat, lng, nearbySpots, routePath, mode = 'default' }) => {\n  const [currentMap, setCurrentMap] = useState(null)\n  // const [currentInfo, setCurrentInfo] = useState(null)\n  const { isLoaded } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_KEY\n  })\n  const [currentPath, setCurrentPath] = useState(null)\n  useEffect(() => {\n    if (routePath) {\n      setCurrentPath(pathFilter(routePath.Geometry))\n      // console.log(currentPath)\n    }\n  }, [routePath])\n  useEffect(() => {\n    if (currentPath) {\n      currentMap.panTo(currentPath[0])\n    }\n  }, [currentPath])\n  const renderStations = spots => {\n    // console.log(spots)\n    return (\n      spots &&\n      spots.map(spot => (\n        <div key={spot.StationID}>\n          <Marker\n            position={{\n              lat: spot.StationPosition.PositionLat,\n              lng: spot.StationPosition.PositionLon\n            }}\n            options={{\n              icon: {\n                url: markerIcon\n              }\n            }}\n          />\n        </div>\n      ))\n    )\n  }\n\n  const renderBox = spots => {\n    return (\n      spots &&\n      spots.map(spot => (\n        <div key={spot.StationID}>\n          <InfoBox\n            position={{\n              lat: spot.StationPosition.PositionLat,\n              lng: spot.StationPosition.PositionLon\n            }}\n            options={{\n              closeBoxURL: '',\n              alignBottom: true,\n              pixelOffset: new window.google.maps.Size(-14.3, -12)\n            }}\n          >\n            <Flex\n              transition='all 0.5s ease'\n              bg={mode === 'default' ? 'brand.yellow' : 'black'}\n              color={mode === 'default' ? 'black' : 'brand.yellow'}\n              justifyContent='center'\n              alignItems='center'\n              borderRadius='100%'\n              w='28px'\n              h='28px'\n            >\n              <Text fontWeight='700'>\n                {mode === 'default'\n                  ? spot.AvailableRentBikes\n                  : spot.AvailableReturnBikes}\n              </Text>\n            </Flex>\n          </InfoBox>\n        </div>\n      ))\n    )\n  }\n\n  const onLoad = polyline => {\n    console.log('polyline: ', polyline)\n  }\n\n  const options = {\n    strokeColor: '#000000',\n    strokeOpacity: 0.6,\n    strokeWeight: 5,\n    fillColor: '#000000',\n    fillOpacity: 0.35,\n    clickable: false,\n    draggable: false,\n    editable: false,\n    visible: true,\n    radius: 30000,\n    zIndex: 1\n  }\n  return isLoaded && lat ? (\n    <Flex flex='13' w='100%' overflow='hidden'>\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        zoom={15}\n        onLoad={e => {\n          console.log(e)\n          setCurrentMap(e)\n          e.setCenter({ lat, lng })\n        }}\n        options={{\n          gestureHandling: 'greedy',\n          zoomControl: false,\n          scaleControl: false,\n          fullscreenControl: false,\n          mapTypeControl: false\n        }}\n      >\n        {/* <Marker position={{ lat, lng }} /> */}\n        {nearbySpots && renderStations(nearbySpots)}\n        {nearbySpots && renderBox(nearbySpots)}\n        <Polyline onLoad={onLoad} path={currentPath} options={options} />\n        {currentPath && (\n          <>\n            <Marker\n              position={{\n                lat: currentPath[0].lat,\n                lng: currentPath[0].lng\n              }}\n              options={{\n                icon: {\n                  url: corsshairIcon\n                }\n              }}\n            />\n            <Marker\n              position={{\n                lat: currentPath[currentPath.length - 1].lat,\n                lng: currentPath[currentPath.length - 1].lng\n              }}\n              options={{\n                icon: {\n                  url: flagIcon\n                }\n              }}\n            />\n          </>\n        )}\n      </GoogleMap>\n    </Flex>\n  ) : (\n    <></>\n  )\n}\n\nMyMap.propTypes = {\n  lat: PropTypes.number,\n  lng: PropTypes.number,\n  nearbySpots: PropTypes.array,\n  routePath: PropTypes.object,\n  mode: PropTypes.string\n}\n\nexport default memo(MyMap)\n","export const pathFilter = pathStr => {\n  const filterResult = pathStr.replace(/[A-Z'()']{1}/gm, '').trim()\n  const finalResult = filterResult.split(',').reduce((acc, cur) => {\n    const curArr = cur.split(' ')\n    return [...acc, { lat: curArr[1] * 1, lng: curArr[0] * 1 }]\n  }, [])\n  return finalResult\n}\n","import axios from 'axios'\nimport jsSHA from 'jssha'\nconst getAuthorizationHeader = () => {\n  const AppID = process.env.REACT_APP_APPID\n  const AppKey = process.env.REACT_APP_APPKEY\n  const GMTString = new Date().toGMTString()\n  const ShaObj = new jsSHA('SHA-1', 'TEXT')\n  ShaObj.setHMACKey(AppKey, 'TEXT')\n  ShaObj.update('x-date: ' + GMTString)\n  const HMAC = ShaObj.getHMAC('B64')\n  const Authorization =\n    'hmac username=\"' +\n    AppID +\n    '\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"' +\n    HMAC +\n    '\"'\n  return { Authorization: Authorization, 'X-Date': GMTString }\n}\nexport const bike = axios.create({\n  headers: getAuthorizationHeader(),\n  baseURL: 'https://ptx.transportdata.tw/MOTC/v2/Bike/'\n})\nexport const cyclingRoute = axios.create({\n  headers: getAuthorizationHeader(),\n  baseURL: 'https://ptx.transportdata.tw/MOTC/v2/Cycling/Shape'\n})\n\n// export const getSpots = async (city = '') => {\n//   try {\n//     const res = await travelInfo.get(`ScenicSpot/${city}?$top=30&$format=JSON`)\n//     console.log(res)\n//   } catch (error) {\n//     console.log(error)\n//   }\n// }\n","import { useState } from 'react'\nimport { bike } from 'api/transport'\nimport useMyToast from './useMyToast'\n\nconst useStation = () => {\n  const [spots, setSpots] = useState(null)\n  const { errorToast } = useMyToast('error')\n  // useEffect(() => {\n  //   search({ option, city, lat, lng })\n  // }, [])\n  const search = async ({ option, city, lat, lng }) => {\n    let finalUrl\n    if (option === 'nearby') {\n      finalUrl = `Station/NearBy?$top=30&$spatialFilter=nearby(${lat}, ${lng}, 1000)&$format=JSON`\n    } else {\n      finalUrl = `Station/${city}?$top=30&$format=JSON`\n    }\n    try {\n      const { data } = await bike.get(finalUrl)\n      setSpots(data)\n    } catch (error) {\n      errorToast('權限到期，請重新整理後再試一次')\n    }\n  }\n  return [spots, search]\n}\n\nexport default useStation\n","import { useState } from 'react'\nimport { bike } from 'api/transport'\n\nconst useAvailability = () => {\n  const [spots, setSpots] = useState([])\n  const search = async ({ option, city, lat, lng }) => {\n    let finalUrl\n    if (option === 'nearby') {\n      finalUrl = `Availability/NearBy?$top=30&$spatialFilter=nearby(${lat}, ${lng}, 1000)&$format=JSON`\n    } else {\n      finalUrl = `Availability/${city}?$top=30&$format=JSON`\n    }\n    try {\n      const { data } = await bike.get(finalUrl)\n      setSpots(data)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  return [spots, search]\n}\n\nexport default useAvailability\n","import { useEffect, useState } from 'react'\nconst usePosition = () => {\n  const [lat, setLat] = useState(null)\n  const [lng, setLng] = useState(null)\n  const [error, setError] = useState(null)\n  const onChange = ({ coords }) => {\n    setLat(coords.latitude)\n    setLng(coords.longitude)\n  }\n  const onError = error => {\n    setError(error.message)\n  }\n  useEffect(() => {\n    const geo = navigator.geolocation\n    const watcher = geo.watchPosition(onChange, onError)\n    if (!geo) {\n      setError('Geolocation is not supported')\n      return\n    }\n    return () => geo.clearWatch(watcher)\n  }, [])\n\n  return [lat, lng, error]\n}\n\nexport default usePosition\n","import { useState } from 'react'\nimport { cyclingRoute } from 'api/transport'\nimport useMyToast from './useMyToast'\n\nconst useShape = () => {\n  const [spots, setSpots] = useState([])\n  const { errorToast } = useMyToast('error')\n  const search = async ({ city, skip }) => {\n    const skipString = skip ? `$skip=${skip}` : ''\n    const tail = '$top=30&$format=JSON'\n    const finalUrl = `${city}?${skipString}&${tail}`\n    try {\n      const { data } = await cyclingRoute.get(finalUrl)\n      setSpots(data)\n    } catch (error) {\n      errorToast('權限到期，請重新整理後再試一次')\n    }\n  }\n  return [spots, search]\n}\n\nexport default useShape\n","// import { useRef, useEffect } from 'react'\nimport { Flex, Button, Heading, Icon } from '@chakra-ui/react'\n// import { HamburgerIcon } from '@chakra-ui/icons'\nimport { useNavigate, useLocation } from 'react-router'\nimport { FaRoute } from 'react-icons/fa'\nimport { ChevronLeftIcon } from '@chakra-ui/icons'\nimport { Logo } from 'assets/logo/logo'\nimport Proptype from 'prop-types'\nimport { textOverflow } from 'assets/style/style'\n\nconst Navbar = ({ onHamburgerClick, children, routeName }) => {\n  const navigate = useNavigate()\n  const { pathname } = useLocation()\n  return (\n    <Flex\n      position='sticky'\n      zIndex='sticky'\n      top='0'\n      bg='brand.yellow'\n      boxShadow='sm'\n      w='100%'\n      alignItems='center'\n      py={5}\n      px={10}\n      color='white'\n      minH='80px'\n    >\n      <ChevronLeftIcon\n        display={{ base: 'block', md: 'none' }}\n        color='brand.black'\n        position='absolute'\n        left='10px'\n        h={10}\n        w={10}\n        onClick={() => navigate('/')}\n      />\n      <Flex\n        alignSelf='center'\n        cursor='pointer'\n        onClick={() => navigate('/')}\n        display={{ base: 'none', md: 'block' }}\n      >\n        <Logo />\n      </Flex>\n\n      {routeName && (\n        <Heading\n          {...textOverflow}\n          maxW={{ base: '250px', md: '500px' }}\n          size='sm'\n          color='black'\n          m='auto'\n        >\n          {routeName}\n        </Heading>\n      )}\n      {children}\n      {/* <Button\n        variant='default'\n        marginLeft='auto'\n        boxShadow='none'\n        w='40px'\n        h='40px'\n        onClick={onHamburgerClick}\n        onFocus={() => document.activeElement.blur()}\n        size='sm'\n      >\n        <HamburgerIcon w={5} h={5} />\n      </Button> */}\n      {pathname !== '/nearbybike' && (\n        <Button\n          variant='default'\n          marginLeft='auto'\n          boxShadow='none'\n          w='40px'\n          h='40px'\n          onClick={onHamburgerClick}\n          size='sm'\n        >\n          <Icon as={FaRoute} w={8} h={8} />\n        </Button>\n      )}\n    </Flex>\n  )\n}\n\nNavbar.propTypes = {\n  onHamburgerClick: Proptype.func,\n  children: Proptype.node,\n  routeName: Proptype.string\n}\n\nexport default Navbar\n","const combineData = (arr1, arr2, target) => {\n  const combine = arr1.concat(arr2).reduce((acc, x) => {\n    acc[x[target]] = Object.assign(acc[x[target]] || {}, x)\n    return acc\n  }, {})\n  const result = Object.keys(combine).map(k => combine[k])\n  return result\n}\n\nexport default combineData\n","import { Button, Flex, Text, Icon, Box, Circle } from '@chakra-ui/react'\nimport { MdDirectionsBike } from 'react-icons/md'\nimport { FaParking } from 'react-icons/fa'\nimport PropTypes from 'prop-types'\nconst MapModeButton = ({ onClick, mapMode, rwdStyle }) => {\n  return (\n    <Button\n      {...rwdStyle}\n      onClick={onClick}\n      bg='white'\n      position='relative'\n      borderRadius='999px'\n    >\n      <Flex\n        letterSpacing='15px'\n        alignItems='center'\n        zIndex={3}\n        gridGap='10px'\n        color={mapMode === 'default' ? 'brand.yellow' : 'brand.black'}\n        transition='0.5s color ease'\n      >\n        <Icon as={MdDirectionsBike} verticalAlign='center' h={6} w={6} />\n        <Text>租車</Text>\n      </Flex>\n      <Box w='50px' padding='3px' h='auto' bg='brand.100' borderRadius='20px'>\n        <Circle\n          w='50%'\n          h='100%'\n          borderRadius='999px'\n          bg='brand.black'\n          transition='all 0.5s ease'\n          position='absolute'\n          top={0}\n          left={0}\n          zIndex={2}\n          transform={\n            mapMode === 'default' ? 'translateX(0)' : 'translateX(100%)'\n          }\n        />\n      </Box>\n      <Flex\n        letterSpacing='15px'\n        alignItems='center'\n        transition='0.5s color ease'\n        color={mapMode === 'default' ? 'brand.black' : 'brand.yellow'}\n        zIndex={3}\n        gridGap='10px'\n      >\n        <Icon as={FaParking} verticalAlign='center' h={6} w={6} />\n        <Text>還車</Text>\n      </Flex>\n    </Button>\n  )\n}\n\nMapModeButton.propTypes = {\n  onClick: PropTypes.func,\n  mapMode: PropTypes.string,\n  rwdStyle: PropTypes.object\n}\n\nexport default MapModeButton\n","import { useEffect, useState, useRef } from 'react'\nimport {\n  Flex,\n  Box,\n  Text,\n  Heading,\n  FormControl,\n  Input,\n  IconButton\n} from '@chakra-ui/react'\nimport { SearchIcon } from '@chakra-ui/icons'\nimport { MyMap } from 'Components/Map'\nimport { usePosition, useSpots, useAvailability } from 'hooks'\nimport combineData from 'util/combineData'\nimport { Navbar } from 'Components/Navbar'\nimport { MapModeButton } from 'Components/SpecialBottons'\nimport useMyToast from 'hooks/useMyToast'\n\nconst BikePage = () => {\n  const inputRef = useRef(null)\n  const [latitude, longitude, error] = usePosition()\n  const [nearbyStations, searchNearbyStations] = useSpots()\n  const [stationDetail, searchStationDetail] = useAvailability()\n  const [searchTerm, setSearchTerm] = useState('')\n  const [mapMode, setMapMode] = useState('default')\n  const { errorToast } = useMyToast('9527')\n  const switchMode = () => {\n    if (mapMode === 'default') {\n      return setMapMode('park')\n    }\n    setMapMode('default')\n  }\n  useEffect(() => {\n    if (latitude && longitude) {\n      searchNearbyStations({\n        option: 'nearby',\n        lat: latitude,\n        lng: longitude\n      })\n      searchStationDetail({\n        option: 'nearby',\n        lat: latitude,\n        lng: longitude\n      })\n    }\n  }, [latitude, longitude])\n  const search = e => {\n    e.preventDefault()\n    setSearchTerm(inputRef.current.value)\n    errorToast('NOT READY YET')\n  }\n  return (\n    <>\n      <Flex flexDirection='column' h='100vh'>\n        <Navbar>\n          <Heading color='brand.black' size='sm' m='auto'>\n            {searchTerm || '您附近的站點'}\n          </Heading>\n          <MapModeButton\n            onClick={switchMode}\n            mapMode={mapMode}\n            rwdStyle={{ display: { base: 'none', md: 'flex' } }}\n          />\n        </Navbar>\n        <Box\n          as='form'\n          display='flex'\n          w='300px'\n          position='absolute'\n          zIndex={10}\n          top='18%'\n          left='50%'\n          transform='translate(-50%, -50%)'\n          onSubmit={search}\n        >\n          <FormControl display='flex' gridGap='6px'>\n            <Input ref={inputRef} placeholder='搜尋站點' bg='brand.white' />\n            <IconButton\n              type='submit'\n              color='white'\n              background='brand.black'\n              aria-label='Search database'\n              icon={<SearchIcon />}\n              onFocus={() => document.activeElement.blur()}\n            />\n          </FormControl>\n        </Box>\n\n        {error ? (\n          <Text>{error}</Text>\n        ) : (\n          latitude && (\n            <MyMap\n              mode={mapMode}\n              lat={latitude}\n              lng={longitude}\n              nearbySpots={\n                nearbyStations &&\n                stationDetail &&\n                combineData(nearbyStations, stationDetail, 'StationID')\n              }\n            />\n          )\n        )}\n        <Flex\n          flex={1}\n          bg='brand.yellow'\n          display={{ base: 'flex', md: 'none' }}\n          justifyContent='center'\n        >\n          <MapModeButton\n            onClick={switchMode}\n            mapMode={mapMode}\n            rwdStyle={{ display: { base: 'flex', md: 'none' }, w: '300px' }}\n          />\n        </Flex>\n      </Flex>\n    </>\n  )\n}\n\nexport default BikePage\n"],"sourceRoot":""}